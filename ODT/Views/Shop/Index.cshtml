@using System.Globalization
@using Microsoft.AspNetCore.Mvc.Localization
@using Domain
@model List<Vlag>

@inject IViewLocalizer Localizer

@section Style
{
    <link rel="stylesheet" href="css/custom.css"/>
}

@{
    ViewData["viewTitle"] = Localizer["winkelDescription"];
    Layout = "_Layout";
    
}

<h2>@ViewData["controllerTitle"]</h2>
<p>@ViewData["viewTitle"]</p>

@{
    Vlag v = Model.Find(p => p.LandCode.Equals(CultureInfo.CurrentCulture.ToString()));
    
    <cache expires-after="@TimeSpan.FromSeconds(5)" vary-by-route="@v.ID">  
    <div class="product current">
        <img src="@v.Afbeelding" alt="@v.Beschrijving"/>
        <h1>@Localizer[@v.Naam]</h1>
        <h2>@Localizer[@String.Format("{0:C}", v.Prijs)]</h2>
        <p>*last updated  @DateTime.Now.ToLongTimeString()</p>
    </div>
    </cache>

    
    @* View Cache *@
    foreach (Vlag vlag in @Model)
     {
         if (!vlag.LandCode.Equals(CultureInfo.CurrentCulture.ToString()))
         {          
             <cache expires-after="@TimeSpan.FromSeconds(5)" vary-by-route="@vlag.ID">         
                 <div class="product">
                     <img src="@vlag.Afbeelding" alt="@vlag.Beschrijving"/>
                     <h1>@Localizer[@vlag.Naam]</h1>
                     <h2>@Localizer[@String.Format("{0:C}", vlag.Prijs)]</h2>
                     <p>*last updated  @DateTime.Now.ToLongTimeString()</p>
                 </div>
             </cache>
         }
     }
}


